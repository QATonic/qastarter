# {{projectName}} - API Test Automation with Supertest and TypeScript
# Dockerfile for running API tests in containers

FROM node:20-slim

WORKDIR /app

# Copy package files
COPY package*.json ./
COPY tsconfig.json ./

# Install dependencies
RUN npm ci

# Copy source code
COPY . .

# Build TypeScript
RUN npm run build 2>/dev/null || true

# Set environment variables
ENV TEST_ENV=qa
ENV NODE_ENV=test

# Create directories for test results
RUN mkdir -p /app/reports /app/coverage

# Default command runs all tests
ENTRYPOINT ["npm", "test"]
