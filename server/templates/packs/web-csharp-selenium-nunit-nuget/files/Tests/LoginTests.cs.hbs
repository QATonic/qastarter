using NUnit.Framework;
using {{projectNamespace}}.Pages;
using {{projectNamespace}}.Utils;
using {{projectNamespace}}.Config;
{{#if (eq reportingTool "allure")}}
using Allure.Net.Commons;
{{/if}}

namespace {{projectNamespace}}.Tests
{
    [TestFixture]
    public class LoginTests
    {
        private LoginPage _loginPage;

        [SetUp]
        public void Setup()
        {
            DriverManager.InitDriver();
            DriverManager.Driver.Navigate().GoToUrl(ConfigReader.Instance.BaseUrl);
            _loginPage = new LoginPage();
        }

        [TearDown]
        public void TearDown()
        {
            DriverManager.QuitDriver();
        }

        [Test]
        [Category("Smoke")]
        public void ValidLogin_ShouldRedirectToInventory()
        {
            _loginPage.Login(
                ConfigReader.Instance.Username,
                ConfigReader.Instance.Password
            );

            Assert.That(_loginPage.IsLoginSuccessful(), Is.True,
                "User should be redirected to inventory page");
        }

        [Test]
        [Category("Regression")]
        public void InvalidLogin_ShouldShowError()
        {
            _loginPage.Login("invalid_user", "wrong_password");

            Assert.That(_loginPage.IsErrorDisplayed(), Is.True,
                "Error message should be displayed");
        }
    }
}