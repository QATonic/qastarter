package tests;

import config.EnvConfig;
import org.testng.Assert;
import org.testng.annotations.Test;
import pages.LoginPage;

/**
 * Login Test Suite
 * 
 * BEFORE RUNNING:
 * 1. Update credentials in: src/test/resources/config/dev.properties
 * 2. Update selectors in: src/main/java/pages/LoginPage.java
 * 3. Run: mvn clean test
 * 
 * This test uses credentials from your config file (recommended approach).
 */
public class LoginTest extends BaseTest {

    @Test(priority = 1, groups = {"smoke", "login"},
          description = "Verify successful login with valid credentials")
    public void testValidLogin() {
        // Get credentials from config file (dev.properties)
        String username = EnvConfig.getInstance().getProperty("validUser.username");
        String password = EnvConfig.getInstance().getProperty("validUser.password");
        
        // Step 1: Navigate to login page
        LoginPage loginPage = new LoginPage(page);
        loginPage.navigateToLogin();
        
        // Step 2: Enter credentials and login
        loginPage.login(username, password);
        
        // Step 3: Verify successful login
        Assert.assertTrue(loginPage.isLoginSuccessful(), 
            "Login should be successful. Check your credentials in dev.properties and selectors in LoginPage.java");
    }
    
    @Test(priority = 2, groups = {"regression", "login"},
          description = "Verify login page elements are visible")
    public void testLoginPageElements() {
        LoginPage loginPage = new LoginPage(page);
        loginPage.navigateToLogin();
        
        Assert.assertTrue(loginPage.isUsernameVisible(), "Username field should be visible");
        Assert.assertTrue(loginPage.isPasswordVisible(), "Password field should be visible");
    }
}
