package {{javaPackage}}.tests;

import {{javaPackage}}.config.ConfigurationReader;
import {{javaPackage}}.core.BaseTest;
import {{javaPackage}}.pages.LoginPage;
import {{javaPackage}}.utils.Log;
import {{javaPackage}}.utils.Log;
{{#if utilities.dataProvider}}
import {{javaPackage}}.utils.TestDataReader;
import org.testng.annotations.DataProvider;
import java.util.List;
import java.util.Map;
{{/if}}
import org.testng.Assert;
{{#unless utilities.dataProvider}}
import org.testng.annotations.DataProvider;
{{/unless}}
import org.testng.annotations.Test;

/**
* Login Tests - Example test class for SauceDemo.
* Demonstrates both configuration-based and data-driven testing.
*/
public class LoginTests extends BaseTest {

@Test(priority = 1, description = "Verify successful login with valid credentials")
public void testValidLogin() {
Log.step("Testing valid login");
LoginPage loginPage = new LoginPage();

String username = ConfigurationReader.getProperty("username");
String password = ConfigurationReader.getProperty("password");

loginPage.login(username, password);

Assert.assertTrue(loginPage.isLoginSuccessful(), "Login should be successful");
Log.info("Valid login test passed");
}

@Test(priority = 2, description = "Verify error message with invalid credentials")
public void testInvalidLogin() {
Log.step("Testing invalid login");
LoginPage loginPage = new LoginPage();

loginPage.login("invalid_user", "wrong_password");

Assert.assertTrue(loginPage.isErrorDisplayed(), "Error message should be displayed");
Log.info("Invalid login test passed - error displayed as expected");
}

/**
* Data Provider that reads test data from CSV file.
* Demonstrates integration with TestDataReader utility.
*/
{{#if utilities.dataProvider}}
/**
* Data Provider that reads test data from CSV file.
* Demonstrates integration with TestDataReader utility.
*/
@DataProvider(name = "loginTestData")
public Object[][] getLoginTestData() {
List<Map<String, String>> testData = TestDataReader.readCsv("users.csv");
    return testData.stream()
    .map(row -> new Object[]{
    row.get("username"),
    row.get("password"),
    row.get("expected")
    })
    .toArray(Object[][]::new);
    }

    @Test(priority = 3, dataProvider = "loginTestData", description = "Data-driven login test using CSV")
    public void testLoginWithTestData(String username, String password, String expectedResult) {
    Log.step("Testing login with data: " + username);
    LoginPage loginPage = new LoginPage();

    loginPage.login(username, password);

    if ("success".equals(expectedResult)) {
    Assert.assertTrue(loginPage.isLoginSuccessful(),
    "Login should be successful for user: " + username);
    } else {
    Assert.assertTrue(loginPage.isErrorDisplayed(),
    "Error should be displayed for user: " + username);
    }
    Log.info("Data-driven test passed for: " + username);
    }
    {{/if}}
    }