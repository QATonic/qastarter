require('dotenv').config();
const fs = require('fs');
const path = require('path');

class EnvConfig {
  constructor() {
    this.env = process.env.TEST_ENV || 'dev';
    this.envData = this.loadEnvData();
  }

  loadEnvData() {
    const dataPath = path.join(__dirname, '..', 'data', `${this.env}.json`);
    return JSON.parse(fs.readFileSync(dataPath, 'utf8'));
  }

  getBaseUrl() {
    return this.envData.baseUrl;
  }

  getCredentials(userType = 'validUser') {
    return this.envData.credentials[userType];
  }

  getTimeout() {
    return this.envData.timeout || 30000;
  }
}

module.exports = new EnvConfig();
