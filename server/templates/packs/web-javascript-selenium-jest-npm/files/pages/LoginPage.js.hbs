/**
 * Login Page - Page object for SauceDemo.
 */
const { By } = require("selenium-webdriver");
const { BasePage } = require("./BasePage");

class LoginPage extends BasePage {
  usernameField = By.id("user-name");
  passwordField = By.id("password");
  loginButton = By.id("login-button");
  errorMessage = By.css("[data-test='error']");

  async enterUsername(username) {
    await this.type(this.usernameField, username);
    return this;
  }

  async enterPassword(password) {
    await this.type(this.passwordField, password);
    return this;
  }

  async clickLogin() {
    await this.click(this.loginButton);
  }

  async login(username, password) {
    await this.enterUsername(username);
    await this.enterPassword(password);
    await this.clickLogin();
  }

  async isErrorDisplayed() {
    return await this.isDisplayed(this.errorMessage);
  }

  async isLoginSuccessful() {
    const url = await this.getCurrentUrl();
    return url.includes("inventory");
  }
}

module.exports = { LoginPage };