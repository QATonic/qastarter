"""
Sample smoke test suite
"""
import pytest
from pages.login_page import LoginPage
from pages.home_page import HomePage
from config.config import Config

@pytest.mark.smoke
class TestSmokeTests:
    """Smoke test suite"""
    
    def test_login_page_loads(self, driver):
        """Verify login page loads successfully"""
        login_page = LoginPage(driver)
        login_page.navigate()
        
        assert "Login" in driver.title, "Login page title not found"
        assert login_page.is_displayed(login_page.USERNAME_INPUT), "Username input not displayed"
        assert login_page.is_displayed(login_page.PASSWORD_INPUT), "Password input not displayed"
        assert login_page.is_displayed(login_page.LOGIN_BUTTON), "Login button not displayed"
    
    def test_home_page_loads_after_login(self, driver):
        """Verify home page loads after successful login"""
        credentials = Config.get_credentials('valid_user')
        
        # Login
        login_page = LoginPage(driver)
        login_page.navigate()
        login_page.login(credentials['username'], credentials['password'])
        
        # Verify home page
        home_page = HomePage(driver)
        assert home_page.is_loaded(), "Home page not loaded"
        assert home_page.is_user_logged_in(), "User not logged in"
    
    def test_page_title(self, driver):
        """Verify page title"""
        login_page = LoginPage(driver)
        login_page.navigate()
        
        assert driver.title is not None, "Page title is None"
        assert len(driver.title) > 0, "Page title is empty"
    
    def test_page_url(self, driver):
        """Verify page URL"""
        base_url = Config.get_base_url()
        login_page = LoginPage(driver)
        login_page.navigate()
        
        assert driver.current_url.startswith(base_url), f"URL doesn't start with {base_url}"
